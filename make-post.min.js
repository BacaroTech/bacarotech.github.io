// @ts-nocheck
const fs=require("fs"),path=require("path"),{execSync:execSync}=require("child_process"),crypto=require("crypto"),chrono=require("chrono-node"),readline=require("readline-sync");function nameCleaning(e){let o=e.replace(/[^A-Za-z0-9 ]+/g," ");return o=o.replace(/\s+/g,"-"),o.toLowerCase()}function formatDateIcs(e){return e.toISOString().replace(/[-:]/g,"").split(".")[0]}function generaIcs(e,o){console.log("\n--- ðŸ“… Configurazione Evento (Linguaggio Naturale) ---");const n=readline.question("Quando inizia? (es: domani alle 10): "),t=readline.question("Quando finisce? (es: tra due ore): "),r=chrono.it.parseDate(n,new Date,{forwardDate:!0}),i=chrono.it.parseDate(t,r);if(!r||!i)return void console.log("âŒ Errore: Non ho capito le date. Riprova.");const a=readline.question("Breve descrizione: "),c=["BEGIN:VCALENDAR","VERSION:2.0","BEGIN:VEVENT",`UID:${crypto.randomUUID()}`,`DTSTAMP:${formatDateIcs(new Date)+"Z"}`,`DTSTART:${formatDateIcs(r)}`,`DTEND:${formatDateIcs(i)}`,`SUMMARY:${o}`,`DESCRIPTION:${a}`,"END:VEVENT","END:VCALENDAR"].join("\n"),s=path.join(e,"evento.ics");fs.existsSync(e)||fs.mkdirSync(e,{recursive:!0}),fs.writeFileSync(s,c,"utf-8"),console.log(`âœ… Evento creato: ${r.toLocaleString("it-IT")}`),console.log(`ðŸ“ Salvato in: ${s}`)}function postFc(){const e=(new Date).getFullYear().toString(),o=readline.question("Give me the title: "),n=nameCleaning(o);try{execSync(`hugo new blog/${e}/${n}/index.md`,{stdio:"inherit"});const t=path.join(process.cwd(),"content","blog",e,n);"s"===readline.question("\nVuoi aggiungere un file .ics a questo post? (s/n): ").toLowerCase()&&generaIcs(t,o)}catch(e){console.error("Errore durante la creazione del post Hugo:",e.message)}}function postRedirect(){const e=nameCleaning(readline.question("Give me the title: "));try{execSync(`hugo new redirect/${e}/index.md`,{stdio:"inherit"})}catch(e){console.error("Errore:",e.message)}}const main=()=>{let e=process.argv[2];e||(e=readline.question("You need a new [post] or [redirect]? "));const o={post:postFc,redirect:postRedirect};o[e]?o[e]():console.log("Opzione non valida.")};main();